<header class="header" [class.header--menu-open]="isOpen()">
  <div class="container">
    <div class="header-content">
      <a routerLink="/" class="logo" aria-label="Product Explorer Home">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" aria-hidden="true">
          <rect width="32" height="32" rx="8" fill="currentColor"/>
          <path d="M16 8L22 14L16 20L10 14L16 8Z" fill="white"/>
        </svg>
        <span class="logo-text">Product Explorer</span>
      </a>

      <button 
        class="mobile-menu-button"
        type="button"
        (click)="toggleMobileMenu()"
        [attr.aria-expanded]="isOpen()"
        aria-controls="main-navigation"
        aria-label="Toggle navigation menu"
      >
        @if (!isOpen()) {
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
        } @else {
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        }
      </button>

      <nav
        id="main-navigation"
        class="nav"
        [class.nav--open]="isOpen()"
        [attr.aria-hidden]="!isOpen()"
        aria-label="Main navigation">
        @for (item of navItems(); track item.label) {
          @if (item.label !== 'Admin' || isAdmin()) {
            <a class="nav-link" 
              [routerLink]="item.link" 
              routerLinkActive="nav-link--active" 
              (click)="closeMobileMenu()">
              {{ item.label }}
            </a>
          }
        }

        <div class="nav-actions">
          <button
            type="button"
            class="cart-icon-button"
            routerLink="/cart"
            aria-label="View cart">
            <div class="cart-icon-wrapper">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                <path d="M6 2L3 6v14a2 2 0 002 2h14a2 2 0 002-2V6l-3-4z" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                <line x1="3" y1="6" x2="21" y2="6" stroke-width="2" stroke-linecap="round"/>
                <path d="M16 10a4 4 0 01-8 0" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              @if (cartCount() > 0) {
                <span class="cart-badge">
                  {{ cartCount() }}
                </span>
              }
            </div>
          </button>

          <button
            type="button"
            class="admin-toggle"
            (click)="toggleAdmin()"
            [class.admin-toggle--active]="isAdmin()"
            aria-label="Toggle admin access">
            @if (isAdmin()) {
              ðŸ”“ Admin Mode
            } @else {
              ðŸ”’ Guest Mode
            }
          </button>

          <button
            type="button"
            class="theme-toggle"
            (click)="toggleTheme()"
            [attr.aria-label]="theme() === 'light' ? 'Switch to dark mode' : 'Switch to light mode'">
            @if (theme() === 'light') {
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/>
              </svg>
            } @else {
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" aria-hidden="true">
                <circle cx="12" cy="12" r="5" stroke-width="2"/>
                <path stroke-linecap="round" stroke-width="2" d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
              </svg>
            }
          </button>
        </div>
      </nav>
    </div>
  </div>
</header>